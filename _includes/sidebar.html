<aside class="sidebar">
  <img
    src="{{ site.avatar | relative_url }}?v={{ site.avatar_version | default: '1' }}"
    alt="{{ site.author.name }}"
    class="profile-img js-spin-trigger"
    role="button"
    tabindex="0"
    aria-label="Spin the profile picture"
    width="180"
    height="180"
    fetchpriority="high"
    decoding="async">

  <div class="name">{{ site.author.name }}</div>
  <div class="affiliation">{{ site.author.title_short }}<br>{{ site.author.affiliation_short }}</div>
  
  {% assign current = page.url %}
  {% for item in site.data.ui.navigation %}
    <a href="{{ item.url | relative_url }}"
       class="sidebar-btn sidebar-nav {% if current == item.url %}btn-active{% else %}btn-outline{% endif %}">
      {{ item.title }}
    </a>
  {% endfor %}

  <a href="mailto:{{ site.author.email }}" class="sidebar-btn btn-primary">
    {{ site.email_button_text | default: "Email Me" }}
  </a>

  <div class="social-links">
    {% for social in site.data.ui.social %}
      {% assign url = site.social[social.url_key] %}
      {% if url %}
        <a href="{{ url }}" class="social-link" title="{{ social.name }}" target="_blank" rel="noopener">
          <svg class="{{ social.class }}" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" 
               {% if social.stroke %}fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"{% else %}fill="currentColor"{% endif %}>
            {{ social.icon }}
          </svg>
        </a>
      {% endif %}
    {% endfor %}
  </div>

  <button id="theme-toggle" class="theme-toggle" 
          aria-label="{{ site.theme_toggle_label | default: 'Toggle dark mode' }}" 
          title="{{ site.theme_toggle_label | default: 'Toggle dark mode' }}">
    <svg class="theme-icon theme-icon-sun" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>

    <svg class="theme-icon theme-icon-moon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
    </svg>
  </button>
</aside>
