---
layout: pdf-viewer
title: Martin Gonzalez Cabello - CV
permalink: /cv-pdf/
description: PDF viewer for Martin Gonzalez Cabello's curriculum vitae. For a print-optimized version, visit /cv-print/.
---

<header class="cv-pdf-topbar">
  <a class="sidebar-btn btn-outline cv-back-link" href="{{ '/cv/' | relative_url }}">← Go back to CV page</a>
  <a class="sidebar-btn btn-primary cv-download-link cv-download-desktop"
     href="{{ '/assets/martin-gonzalez-cabello-cv.pdf' | relative_url }}"
     download="martin-gonzalez-cabello-cv.pdf">
    Download PDF
  </a>
</header>

<!-- Desktop: native browser PDF viewer in iframe -->
<section class="cv-pdf-wrapper" aria-label="CV PDF viewer page">
  <iframe
    src="{{ '/assets/martin-gonzalez-cabello-cv.pdf' | relative_url }}#toolbar=1&navpanes=0&view=Fit"
    title="Martin Gonzalez Cabello - CV"
    loading="eager"
    height="800">
    <p class="cv-pdf-fallback-text">
      Your browser cannot display embedded PDFs.
      <a href="{{ '/assets/martin-gonzalez-cabello-cv.pdf' | relative_url }}" target="_blank" rel="noopener">
        Open or download the CV PDF
      </a>.
    </p>
  </iframe>
</section>

<!-- Mobile: PDF.js canvas renderer — JS populates this -->
<div id="cv-pdf-mobile" class="cv-pdf-mobile" aria-label="CV PDF canvas viewer">
  <div class="cv-pdf-mobile-actions">
    <a class="sidebar-btn btn-primary cv-download-link"
       href="{{ '/assets/martin-gonzalez-cabello-cv.pdf' | relative_url }}"
       download="martin-gonzalez-cabello-cv.pdf">
      Download PDF
    </a>
    <button id="cv-pdf-share-mobile" class="sidebar-btn btn-outline cv-share-btn" type="button" hidden>
      Share PDF
    </button>
  </div>
  <div id="cv-pdf-mobile-pages" class="cv-pdf-mobile-pages">
    <p class="cv-pdf-loading">Loading CV…</p>
  </div>
</div>

<style>
  :root {
    --cv-pdf-topbar-height: 72px;
  }

  html,
  .pdf-viewer-body {
    margin: 0;
    width: 100%;
    overflow-x: hidden;
  }

  .pdf-viewer-shell {
    width: 100%;
    max-width: 100%;
    min-height: 100dvh;
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    overflow-x: hidden;
  }

  .cv-pdf-topbar {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 1000;
    height: var(--cv-pdf-topbar-height);
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.75rem;
    padding: 0.75rem;
    box-sizing: border-box;
    background: var(--bg-paper);
    border-bottom: 1px solid var(--border);
  }

  .cv-back-link {
    width: auto;
    display: inline-flex;
    margin: 0;
    padding: 0.5rem 1rem;
  }

  .cv-download-link {
    width: auto;
    display: inline-flex;
    margin: 0;
    padding: 0.5rem 1rem;
    white-space: nowrap;
  }

  .cv-download-desktop {
    display: inline-flex;
  }

  .cv-pdf-wrapper {
    width: 100%;
    max-width: 100%;
    padding-top: var(--cv-pdf-topbar-height);
    box-sizing: border-box;
  }

  .cv-pdf-wrapper iframe {
    display: block;
    width: 100%;
    max-width: 100%;
    height: calc(100dvh - var(--cv-pdf-topbar-height));
    border: 0;
    background: #fff;
  }

  .cv-pdf-fallback-text {
    margin: 1rem;
  }

  /* Mobile canvas container — hidden on desktop */
  .cv-pdf-mobile {
    display: none;
  }

  @media (max-width: 768px) {
    :root {
      --cv-pdf-topbar-height: 64px;
    }

    /* overflow-x: hidden on html blocks body scroll on iOS — override it */
    html {
      overflow-x: hidden;
      overflow-y: auto;
    }

    .pdf-viewer-shell {
      height: auto;
      overflow: visible;
    }

    .cv-pdf-topbar {
      padding: 0.5rem;
    }

    .cv-back-link {
      padding: 0.45rem 0.75rem;
      font-size: 0.95rem;
    }

    .cv-download-desktop {
      display: none;
    }

    /* Hide iframe — canvas renderer takes over */
    .cv-pdf-wrapper {
      display: none;
    }

    /* Canvas renderer container */
    .cv-pdf-mobile {
      display: block;
      width: 100%;
      padding-top: var(--cv-pdf-topbar-height);
      box-sizing: border-box;
    }

    .cv-pdf-mobile-actions {
      position: sticky;
      top: var(--cv-pdf-topbar-height);
      z-index: 900;
      display: flex;
      gap: 0.5rem;
      padding: 0.5rem;
      background: var(--bg-paper);
      border-bottom: 1px solid var(--border);
    }

    .cv-pdf-mobile-actions .sidebar-btn {
      margin: 0;
      width: 50%;
      padding: 0.45rem 0.65rem;
      font-size: 0.9rem;
    }

    .cv-pdf-mobile-pages {
      background: #525659; /* matches PDF.js viewer background */
    }

    /* Each rendered page canvas */
    .cv-pdf-mobile-pages canvas {
      display: block;
      width: 100%;
      height: auto;
      margin-bottom: 4px;
    }

    .cv-pdf-loading,
    .cv-pdf-error {
      padding: 2rem 1rem;
      text-align: center;
      color: #ccc;
      font-size: 0.95rem;
      font-family: var(--font-body, sans-serif);
    }

    .cv-pdf-error a {
      color: #90caf9;
    }
  }
</style>

<script>
(function () {
  var pdfUrl = '{{ "/assets/martin-gonzalez-cabello-cv.pdf" | relative_url }}';
  var pdfAbsoluteUrl = new URL(pdfUrl, window.location.origin).href;
  var shareButton = document.getElementById('cv-pdf-share-mobile');

  if (shareButton && navigator.share) {
    shareButton.hidden = false;
    shareButton.addEventListener('click', async function () {
      var originalLabel = shareButton.textContent;
      shareButton.disabled = true;
      shareButton.textContent = 'Preparing...';

      try {
        if (navigator.canShare && window.File) {
          var response = await fetch(pdfAbsoluteUrl);
          if (response.ok) {
            var blob = await response.blob();
            var pdfFile = new File([blob], 'martin-gonzalez-cabello-cv.pdf', { type: 'application/pdf' });

            if (navigator.canShare({ files: [pdfFile] })) {
              await navigator.share({
                title: 'Martin Gonzalez Cabello - CV',
                files: [pdfFile]
              });
              return;
            }
          }
        }

        await navigator.share({
          title: 'Martin Gonzalez Cabello - CV',
          url: pdfAbsoluteUrl
        });
      } catch (err) {
        if (!err || err.name !== 'AbortError') {
          window.open(pdfAbsoluteUrl, '_blank', 'noopener');
        }
      } finally {
        shareButton.disabled = false;
        shareButton.textContent = originalLabel;
      }
    });
  }

  if (window.innerWidth > 768) return; // desktop keeps the iframe

  var container = document.getElementById('cv-pdf-mobile-pages');
  if (!container) return;

  import('https://cdn.jsdelivr.net/npm/pdfjs-dist@4.9.155/build/pdf.min.mjs')
    .then(function (pdfjsLib) {
      pdfjsLib.GlobalWorkerOptions.workerSrc =
        'https://cdn.jsdelivr.net/npm/pdfjs-dist@4.9.155/build/pdf.worker.min.mjs';
      return pdfjsLib.getDocument({ url: pdfUrl, verbosity: 0 }).promise;
    })
    .then(function (pdf) {
      container.innerHTML = ''; // clear "Loading CV…"

      var containerWidth = container.clientWidth;
      var dpr = window.devicePixelRatio || 1;

      // Render pages one by one so they appear top-to-bottom as they finish
      function renderPage(pageNum) {
        if (pageNum > pdf.numPages) return Promise.resolve();

        return pdf.getPage(pageNum).then(function (page) {
          // Scale so the page fills the container width, at device resolution
          var naturalWidth = page.getViewport({ scale: 1 }).width;
          var scale = (containerWidth * dpr) / naturalWidth;
          var vp = page.getViewport({ scale: scale });

          var canvas = document.createElement('canvas');
          canvas.width  = Math.round(vp.width);
          canvas.height = Math.round(vp.height);
          // Display at CSS pixel size (dpr handles sharpness on retina screens)
          canvas.style.width  = containerWidth + 'px';
          canvas.style.height = Math.round(vp.height / dpr) + 'px';
          container.appendChild(canvas);

          return page.render({
            canvasContext: canvas.getContext('2d'),
            viewport: vp
          }).promise.then(function () {
            return renderPage(pageNum + 1);
          });
        });
      }

      return renderPage(1);
    })
    .catch(function () {
      container.innerHTML =
        '<p class="cv-pdf-error">Could not load the PDF.<br>' +
        '<a href="' + pdfUrl + '" target="_blank" rel="noopener">Open CV PDF directly</a></p>';
    });
}());
</script>
